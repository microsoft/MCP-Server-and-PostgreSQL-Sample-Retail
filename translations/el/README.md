<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "94449afc70ef625a5360a67829a017b3",
  "translation_date": "2025-09-30T09:49:51+00:00",
  "source_file": "README.md",
  "language_code": "el"
}
-->
# MCP Server και PostgreSQL Παράδειγμα - Ανάλυση Λιανικών Πωλήσεων

## Μάθετε MCP με Ενσωμάτωση Βάσης Δεδομένων μέσω Πρακτικών Παραδειγμάτων

[![Συνεισφέροντες GitHub](https://img.shields.io/github/contributors/microsoft/MCP-Server-and-PostgreSQL-Sample-Retail.svg)](https://GitHub.com/microsoft/MCP-Server-and-PostgreSQL-Sample-Retail/graphs/contributors)
[![Θέματα GitHub](https://img.shields.io/github/issues/microsoft/MCP-Server-and-PostgreSQL-Sample-Retail.svg)](https://GitHub.com/microsoft/MCP-Server-and-PostgreSQL-Sample-Retail/issues)
[![Αιτήματα GitHub](https://img.shields.io/github/issues-pr/microsoft/MCP-Server-and-PostgreSQL-Sample-Retail.svg)](https://GitHub.com/microsoft/MCP-Server-and-PostgreSQL-Sample-Retail/pulls)
[![PRs Welcome](https://img.shields.io/badge/PRs-welcome-brightgreen.svg?style=flat-square)](http://makeapullrequest.com)

[![Γίνετε μέλος στο Azure AI Foundry Discord](https://dcbadge.limes.pink/api/server/ByRwuEEgH4)](https://discord.com/invite/ByRwuEEgH4)

Ακολουθήστε αυτά τα βήματα για να ξεκινήσετε να χρησιμοποιείτε αυτούς τους πόρους:

1. **Κλωνοποιήστε το Αποθετήριο**: Πατήστε [εδώ για κλωνοποίηση](https://github.com/microsoft/MCP-Server-and-PostgreSQL-Sample-Retail/fork)
2. **Κατεβάστε το Αποθετήριο**: `git clone https://github.com/YOUR-USERNAME/MCP-Server-and-PostgreSQL-Sample-Retail.git`
3. **Γίνετε μέλος στο Azure AI Foundry Discord**: [Συνδεθείτε με ειδικούς και άλλους προγραμματιστές](https://discord.com/invite/ByRwuEEgH4)

### 🌐 Υποστήριξη Πολλών Γλωσσών

#### Υποστηρίζεται μέσω GitHub Action (Αυτοματοποιημένο & Πάντα Ενημερωμένο)

[Γαλλικά](../fr/README.md) | [Ισπανικά](../es/README.md) | [Γερμανικά](../de/README.md) | [Ρωσικά](../ru/README.md) | [Αραβικά](../ar/README.md) | [Περσικά (Φαρσί)](../fa/README.md) | [Ουρντού](../ur/README.md) | [Κινέζικα (Απλοποιημένα)](../zh/README.md) | [Κινέζικα (Παραδοσιακά, Μακάο)](../mo/README.md) | [Κινέζικα (Παραδοσιακά, Χονγκ Κονγκ)](../hk/README.md) | [Κινέζικα (Παραδοσιακά, Ταϊβάν)](../tw/README.md) | [Ιαπωνικά](../ja/README.md) | [Κορεατικά](../ko/README.md) | [Χίντι](../hi/README.md) | [Μπενγκάλι](../bn/README.md) | [Μαραθικά](../mr/README.md) | [Νεπαλικά](../ne/README.md) | [Παντζάμπι (Γκουρμούκι)](../pa/README.md) | [Πορτογαλικά (Πορτογαλία)](../pt/README.md) | [Πορτογαλικά (Βραζιλία)](../br/README.md) | [Ιταλικά](../it/README.md) | [Πολωνικά](../pl/README.md) | [Τουρκικά](../tr/README.md) | [Ελληνικά](./README.md) | [Ταϊλανδικά](../th/README.md) | [Σουηδικά](../sv/README.md) | [Δανικά](../da/README.md) | [Νορβηγικά](../no/README.md) | [Φινλανδικά](../fi/README.md) | [Ολλανδικά](../nl/README.md) | [Εβραϊκά](../he/README.md) | [Βιετναμέζικα](../vi/README.md) | [Ινδονησιακά](../id/README.md) | [Μαλαισιακά](../ms/README.md) | [Ταγκαλόγκ (Φιλιππινέζικα)](../tl/README.md) | [Σουαχίλι](../sw/README.md) | [Ουγγρικά](../hu/README.md) | [Τσέχικα](../cs/README.md) | [Σλοβακικά](../sk/README.md) | [Ρουμανικά](../ro/README.md) | [Βουλγαρικά](../bg/README.md) | [Σερβικά (Κυριλλικά)](../sr/README.md) | [Κροατικά](../hr/README.md) | [Σλοβενικά](../sl/README.md) | [Ουκρανικά](../uk/README.md) | [Βιρμανικά (Μιανμάρ)](../my/README.md)

**Αν επιθυμείτε να υποστηριχθούν επιπλέον γλώσσες, οι διαθέσιμες γλώσσες αναφέρονται [εδώ](https://github.com/Azure/co-op-translator/blob/main/getting_started/supported-languages.md)**

## Εισαγωγή

Αυτό το παράδειγμα δείχνει πώς να δημιουργήσετε και να αναπτύξετε έναν ολοκληρωμένο **Model Context Protocol (MCP) server** που παρέχει στους AI βοηθούς ασφαλή και έξυπνη πρόσβαση σε δεδομένα λιανικών πωλήσεων μέσω PostgreSQL. Το έργο παρουσιάζει χαρακτηριστικά επιχειρηματικής κλάσης, όπως **Ασφάλεια σε Επίπεδο Γραμμής (RLS)**, **δυνατότητες σημασιολογικής αναζήτησης** και **ενσωμάτωση Azure AI** για σενάρια ανάλυσης λιανικών πωλήσεων.

**Κύριες Χρήσεις:**
- **Ανάλυση Πωλήσεων με Υποστήριξη AI**: Επιτρέψτε στους AI βοηθούς να ερωτούν και να αναλύουν δεδομένα λιανικών πωλήσεων μέσω φυσικής γλώσσας
- **Ασφαλής Πρόσβαση Πολλαπλών Ενοικιαστών**: Επιδείξτε την υλοποίηση Ασφάλειας σε Επίπεδο Γραμμής, όπου διαφορετικοί διαχειριστές καταστημάτων μπορούν να έχουν πρόσβαση μόνο στα δεδομένα του καταστήματός τους
- **Σημασιολογική Αναζήτηση Προϊόντων**: Παρουσιάστε ανακάλυψη προϊόντων με υποστήριξη AI χρησιμοποιώντας ενσωματώσεις κειμένου
- **Επιχειρηματική Ενσωμάτωση**: Δείξτε πώς να ενσωματώσετε MCP servers με υπηρεσίες Azure και βάσεις δεδομένων PostgreSQL

**Ιδανικό για:**
- Προγραμματιστές που μαθαίνουν να δημιουργούν MCP servers με ενσωμάτωση βάσης δεδομένων
- Μηχανικούς δεδομένων που υλοποιούν ασφαλείς λύσεις ανάλυσης πολλαπλών ενοικιαστών
- Προγραμματιστές εφαρμογών AI που εργάζονται με δεδομένα λιανικής ή ηλεκτρονικού εμπορίου
- Όποιον ενδιαφέρεται να συνδυάσει AI βοηθούς με επιχειρηματικές βάσεις δεδομένων

## Γίνετε μέλος της κοινότητας Azure AI Foundry Discord
Μοιραστείτε τις εμπειρίες σας με MCP και γνωρίστε ειδικούς και ομάδες προϊόντων 

[![Azure AI Discord](https://dcbadge.limes.pink/api/server/ByRwuEEgH4)](https://discord.com/invite/ByRwuEEgH4)

# MCP Server Ανάλυσης Πωλήσεων

Ένας Model Context Protocol (MCP) server που παρέχει ολοκληρωμένη πρόσβαση σε βάση δεδομένων πωλήσεων πελατών για την επιχείρηση Zava Retail DIY. Αυτός ο server επιτρέπει στους AI βοηθούς να ερωτούν και να αναλύουν δεδομένα λιανικών πωλήσεων μέσω μιας ασφαλούς, ευαισθητοποιημένης στο σχήμα διεπαφής.

## 📚 Ολοκληρωμένος Οδηγός Υλοποίησης

Για μια λεπτομερή ανάλυση του πώς κατασκευάζεται αυτή η λύση και πώς να υλοποιήσετε παρόμοιους MCP servers, δείτε τον ολοκληρωμένο **[Οδηγό Παράδειγματος](Sample_Walkthrough.md)**. Αυτός ο οδηγός παρέχει:

- **Ανάλυση Αρχιτεκτονικής**: Ανάλυση συστατικών και σχεδιαστικών προτύπων
- **Βήμα-Βήμα Κατασκευή**: Από τη ρύθμιση του έργου έως την ανάπτυξη
- **Ανάλυση Κώδικα**: Λεπτομερής εξήγηση της υλοποίησης του MCP server
- **Προηγμένα Χαρακτηριστικά**: Ασφάλεια σε Επίπεδο Γραμμής, σημασιολογική αναζήτηση και παρακολούθηση
- **Καλές Πρακτικές**: Οδηγίες για ασφάλεια, απόδοση και ανάπτυξη
- **Αντιμετώπιση Προβλημάτων**: Συνηθισμένα ζητήματα και λύσεις

Ιδανικό για προγραμματιστές που θέλουν να κατανοήσουν τις λεπτομέρειες υλοποίησης και να δημιουργήσουν παρόμοιες λύσεις.

## 🤖 Τι είναι το MCP (Model Context Protocol);

Το **Model Context Protocol (MCP)** είναι ένα ανοιχτό πρότυπο που επιτρέπει στους AI βοηθούς να έχουν ασφαλή πρόσβαση σε εξωτερικές πηγές δεδομένων και εργαλεία σε πραγματικό χρόνο. Σκεφτείτε το ως μια γέφυρα που επιτρέπει στα AI μοντέλα να συνδέονται με βάσεις δεδομένων, APIs, συστήματα αρχείων και άλλους πόρους, διατηρώντας παράλληλα την ασφάλεια και τον έλεγχο.

### Κύρια Οφέλη:
- **Πρόσβαση σε Δεδομένα σε Πραγματικό Χρόνο**: Οι AI βοηθοί μπορούν να ερωτούν ζωντανές βάσεις δεδομένων και APIs
- **Ασφαλής Ενσωμάτωση**: Ελεγχόμενη πρόσβαση με αυθεντικοποίηση και δικαιώματα  
- **Επεκτασιμότητα Εργαλείων**: Προσθέστε προσαρμοσμένες δυνατότητες στους AI βοηθούς
- **Τυποποιημένο Πρωτόκολλο**: Λειτουργεί σε διαφορετικές AI πλατφόρμες και εργαλεία

### Νέοι στο MCP;

Αν είστε νέοι στο Model Context Protocol, σας προτείνουμε να ξεκινήσετε με τους ολοκληρωμένους πόρους για αρχάριους της Microsoft:

**📖 [Οδηγός MCP για Αρχάριους](https://aka.ms/mcp-for-beginners)**

Αυτός ο πόρος παρέχει:
- Εισαγωγή στις έννοιες και την αρχιτεκτονική του MCP
- Βήμα-βήμα οδηγίες για τη δημιουργία του πρώτου σας MCP server
- Καλές πρακτικές για ανάπτυξη MCP
- Παραδείγματα ενσωμάτωσης με δημοφιλείς AI πλατφόρμες
- Πόρους και υποστήριξη κοινότητας

Μόλις κατανοήσετε τα βασικά, επιστρέψτε εδώ για να εξερευνήσετε αυτήν την προηγμένη υλοποίηση ανάλυσης λιανικών πωλήσεων!

## 📚 Ολοκληρωμένος Οδηγός Μάθησης: /walkthrough

Αυτό το αποθετήριο περιλαμβάνει έναν πλήρη **12-ενότητες οδηγό μάθησης** που αποδομεί αυτό το παράδειγμα MCP server λιανικής σε κατανοητά, βήμα-βήμα μαθήματα. Ο οδηγός μετατρέπει αυτό το λειτουργικό παράδειγμα σε έναν ολοκληρωμένο εκπαιδευτικό πόρο, ιδανικό για προγραμματιστές που θέλουν να κατανοήσουν πώς να δημιουργήσουν παραγωγικούς MCP servers με ενσωμάτωση βάσης δεδομένων.

### Τι θα Μάθετε

Ο οδηγός καλύπτει τα πάντα, από βασικές έννοιες MCP έως προηγμένη ανάπτυξη παραγωγής, συμπεριλαμβανομένων:

- **Βασικά MCP**: Κατανόηση του Model Context Protocol και των πραγματικών εφαρμογών του
- **Ενσωμάτωση Βάσης Δεδομένων**: Υλοποίηση ασφαλούς σύνδεσης PostgreSQL με Ασφάλεια σε Επίπεδο Γραμμής
- **Χαρακτηριστικά με Υποστήριξη AI**: Προσθήκη δυνατοτήτων σημασιολογικής αναζήτησης με ενσωματώσεις Azure OpenAI
- **Υλοποίηση Ασφάλειας**: Αυθεντικοποίηση, εξουσιοδότηση και απομόνωση δεδομένων επιχειρηματικής κλάσης
- **Ανάπτυξη Εργαλείων**: Δημιουργία εξελιγμένων MCP εργαλείων για ανάλυση δεδομένων και επιχειρηματική ευφυΐα
- **Δοκιμές & Εντοπισμός Σφαλμάτων**: Στρατηγικές δοκιμών και τεχνικές εντοπισμού σφαλμάτων
- **Ενσωμάτωση VS Code**: Ρύθμιση AI Chat για ερωτήματα βάσης δεδομένων με φυσική γλώσσα
- **Ανάπτυξη Παραγωγής**: Κοντεϊνεροποίηση, κλιμάκωση και στρατηγικές ανάπτυξης στο cloud
- **Παρακολούθηση & Παρατηρησιμότητα**: Application Insights, καταγραφή και παρακολούθηση απόδοσης

### Επισκόπηση Διαδρομής Μάθησης

Ο οδηγός ακολουθεί μια προοδευτική δομή μάθησης σχεδιασμένη για προγραμματιστές όλων των επιπέδων δεξιοτήτων:

| Ενότητα | Περιοχή Εστίασης | Περιγραφή | Εκτιμώμενος Χρόνος |
|--------|------------------|-----------|--------------------|
| **[00-Εισαγωγή](walkthrough/00-Introduction/README.md)** | Θεμέλια | Έννοιες MCP, μελέτη περίπτωσης Zava Retail, επισκόπηση αρχιτεκτονικής | 30 λεπτά |
| **[01-Αρχιτεκτονική](walkthrough/01-Architecture/README.md)** | Σχεδιαστικά Πρότυπα | Τεχνική αρχιτεκτονική, πολυεπίπεδος σχεδιασμός, συστατικά συστήματος | 45 λεπτά |
| **[02-Ασφάλεια](walkthrough/02-Security/README.md)** | Επιχειρηματική Ασφάλεια | Αυθεντικοποίηση Azure, Ασφάλεια σε Επίπεδο Γραμμής, απομόνωση πολλαπλών ενοικιαστών | 60 λεπτά |
| **[03-Ρύθμιση](walkthrough/03-Setup/README.md)** | Περιβάλλον | Ρύθμιση Docker, Azure CLI, διαμόρφωση έργου, επικύρωση | 45 λεπτά |
| **[04-Βάση Δεδομένων](walkthrough/04-Database/README.md)** | Επίπεδο Δεδομένων | Σχήμα PostgreSQL, pgvector, πολιτικές RLS, δείγματα δεδομένων | 60 λεπτά |
| **[05-MCP-Server](walkthrough/05-MCP-Server/README.md)** | Κύρια Υλοποίηση | Πλαίσιο FastMCP, ενσωμάτωση βάσης δεδομένων, διαχείριση συνδέσεων | 90 λεπτά |
| **[06-Εργαλεία](walkthrough/06-Tools/README.md)** | Ανάπτυξη Εργαλείων | Δημιουργία MCP εργαλείων, επικύρωση ερωτημάτων, χαρακτηριστικά επιχειρηματικής ευφυΐας | 75 λεπτά |
| **[07-Σημασιολογική Αναζήτηση](walkthrough/07-Semantic-Search/README.md)** | Ενσωμάτωση AI | Ενσωματώσεις Azure OpenAI, αναζήτηση με διανύσματα, στρατηγικές υβριδικής αναζήτησης | 60 λεπτά |
| **[08-Δοκιμές](walkthrough/08-Testing/README.md)** | Διασφάλιση Ποιότητας | Μονάδες δοκιμών, δοκιμές ενσωμάτωσης, δοκιμές απόδοσης, εντοπισμός σφαλμάτων | 75 λεπτά |
| **[09-VS-Code](walkthrough/09-VS-Code/README.md)** | Εμπειρία Ανάπτυξης | Ρύθμιση VS Code
### 📋 Προαπαιτούμενα Μάθησης

**Συνιστώμενο Υπόβαθρο**:
- Βασική εμπειρία προγραμματισμού σε Python
- Εξοικείωση με REST APIs και βάσεις δεδομένων
- Γενική κατανόηση εννοιών AI/ML
- Βασικές γνώσεις γραμμής εντολών και Docker

**Μη Απαραίτητο (αλλά χρήσιμο)**:
- Προηγούμενη εμπειρία με MCP (καλύπτεται από την αρχή)
- Εμπειρία με το Azure cloud (παρέχουμε καθοδήγηση βήμα προς βήμα)
- Προχωρημένες γνώσεις PostgreSQL (εξηγούμε τις έννοιες όπως χρειάζεται)

### 💡 Συμβουλές Μάθησης

1. **Πρακτική Προσέγγιση**: Κάθε ενότητα περιλαμβάνει παραδείγματα κώδικα που μπορείτε να εκτελέσετε και να τροποποιήσετε
2. **Προοδευτική Πολυπλοκότητα**: Οι έννοιες χτίζονται σταδιακά από απλές σε πιο προχωρημένες
3. **Πραγματικό Πλαίσιο**: Όλα τα παραδείγματα χρησιμοποιούν ρεαλιστικά σενάρια λιανικής πώλησης
4. **Έτοιμο για Παραγωγή**: Τα παραδείγματα κώδικα είναι σχεδιασμένα για πραγματική χρήση στην παραγωγή
5. **Υποστήριξη Κοινότητας**: Εγγραφείτε στην [κοινότητα μας στο Discord](https://discord.com/invite/ByRwuEEgH4) για βοήθεια και συζητήσεις

### 🔗 Σχετικοί Πόροι

- **[MCP για Αρχάριους](https://aka.ms/mcp-for-beginners)**: Βασική ανάγνωση
- **[Παράδειγμα Περιήγησης](Sample_Walkthrough.md)**: Τεχνική επισκόπηση υψηλού επιπέδου
- **[Azure AI Foundry](https://azure.microsoft.com/en-us/products/ai-foundry)**: Πλατφόρμα cloud που χρησιμοποιείται στα παραδείγματα
- **[FastMCP Framework](https://github.com/jlowin/fastmcp)**: Πλαίσιο υλοποίησης MCP σε Python

**Έτοιμοι να ξεκινήσετε;** Ξεκινήστε με **[Ενότητα 00: Εισαγωγή](walkthrough/00-Introduction/README.md)** ή εξερευνήστε την **[πλήρη επισκόπηση περιήγησης](walkthrough/README.md)**.

## Προαπαιτούμενα

1. Εγκατεστημένο Docker Desktop
2. Εγκατεστημένο Git
3. **Azure CLI**: Εγκαταστήστε και συνδεθείτε με το Azure CLI
4. Πρόσβαση στο μοντέλο OpenAI `text-embedding-3-small` και προαιρετικά στο μοντέλο `gpt-4o-mini`.

## Ξεκινώντας

Ανοίξτε ένα παράθυρο τερματικού και εκτελέστε τις παρακάτω εντολές:

1. Συνδεθείτε με το Azure CLI

    ```bash
    az login
    ```

2. Κλωνοποιήστε το αποθετήριο

    ```bash
    git clone https://github.com/gloveboxes/Zava-MCP-Server-and-PostgreSQL-Sample
    ```

3. Μεταβείτε στον κατάλογο του έργου

    ```bash
    cd Zava-MCP-Server-and-PostgreSQL-Sample
    ```

### Ανάπτυξη Πόρων Azure

Εκτελέστε τα παρακάτω σενάρια για να αυτοματοποιήσετε την ανάπτυξη των πόρων Azure που απαιτούνται για τον MCP server.

Τα σενάρια ανάπτυξης θα εγκαταστήσουν αυτόματα το μοντέλο `text-embedding-3-small`. Κατά τη διάρκεια της ανάπτυξης, θα έχετε την επιλογή να συμπεριλάβετε και το μοντέλο `gpt-4o-mini`. Σημειώστε ότι το `gpt-4o-mini` **δεν απαιτείται** για αυτό το έργο και περιλαμβάνεται μόνο για πιθανές μελλοντικές βελτιώσεις.

**Επιλέξτε το σενάριο για την πλατφόρμα σας:**

#### Windows (PowerShell)

```powershell
# Run from the project root directory
cd infra && ./deploy.ps1
```

#### macOS/Linux (Bash)

```bash
# Run from the project root directory
cd infra && ./deploy.sh
```

## Εκτέλεση του MCP Server

Ο πιο εύκολος τρόπος για να εκτελέσετε ολόκληρη τη στοίβα (PostgreSQL + MCP Server) είναι χρησιμοποιώντας το Docker Compose:

### Εκκίνηση της Στοίβας

```bash
# Start PostgreSQL and MCP Server
docker compose up -d

# View logs
docker compose logs -f

# View MCP Server Logs
docker compose logs -f mcp_server

# View the PostgreSQL Logs
docker compose logs -f pg17

# Stop the stack
docker compose down -v
```

## Χρήση

Τα παρακάτω υποθέτουν ότι θα χρησιμοποιήσετε την ενσωματωμένη υποστήριξη MCP server του VS Code.

1. Ανοίξτε το έργο στο VS Code. Από το τερματικό, εκτελέστε:

    ```bash
    code .
    ```

2. Ξεκινήστε έναν ή περισσότερους MCP servers χρησιμοποιώντας τις διαμορφώσεις στο `.vscode/mcp.json`. Το αρχείο περιέχει τέσσερις διαφορετικές διαμορφώσεις server, καθεμία από τις οποίες αντιπροσωπεύει έναν διαφορετικό ρόλο διαχειριστή καταστήματος:

   - Κάθε διαμόρφωση χρησιμοποιεί ένα μοναδικό RLS (Row Level Security) user ID
   - Αυτά τα user IDs προσομοιώνουν διαφορετικές ταυτότητες διαχειριστών καταστημάτων που έχουν πρόσβαση στη βάση δεδομένων
   - Το σύστημα RLS περιορίζει την πρόσβαση στα δεδομένα βάσει του καταστήματος που έχει ανατεθεί στον διαχειριστή
   - Αυτό μιμείται πραγματικά σενάρια όπου οι διαχειριστές καταστημάτων συνδέονται με διαφορετικούς λογαριασμούς Entra ID

    ```json
    {
        "servers": {
            "zava-sales-analysis-headoffice": {
                "url": "http://127.0.0.1:8000/mcp",
                "type": "http",
                "headers": {"x-rls-user-id": "00000000-0000-0000-0000-000000000000"}
            },
            "zava-sales-analysis-seattle": {
                "url": "http://127.0.0.1:8000/mcp",
                "type": "http",
                "headers": {"x-rls-user-id": "f47ac10b-58cc-4372-a567-0e02b2c3d479"}
            },
            "zava-sales-analysis-redmond": {
                "url": "http://127.0.0.1:8000/mcp",
                "type": "http",
                "headers": {"x-rls-user-id": "e7f8a9b0-c1d2-3e4f-5678-90abcdef1234"}
            },
            "zava-sales-analysis-online": {
                "url": "http://127.0.0.1:8000/mcp",
                "type": "http",
                "headers": {"x-rls-user-id": "2f4e6d8c-1a3b-5c7e-9f0a-b2d4f6e8c0a2"}
            }
        },
        "inputs": []
    }
    ```

### Άνοιγμα AI Chat στο VS Code

1. Ανοίξτε τη λειτουργία AI Chat στο VS Code
2. Πληκτρολογήστε **#zava** και επιλέξτε έναν από τους MCP servers που ξεκινήσατε
3. Κάντε ερωτήσεις σχετικά με τα δεδομένα πωλήσεων - Δείτε παρακάτω παραδείγματα ερωτήσεων

### Παραδείγματα Ερωτήσεων

1. Εμφάνιση των 20 κορυφαίων προϊόντων βάσει εσόδων πωλήσεων
1. Εμφάνιση πωλήσεων ανά κατάστημα
1. Ποιες ήταν οι πωλήσεις του τελευταίου τριμήνου ανά κατηγορία;
1. Ποια προϊόντα πουλάμε που είναι παρόμοια με "δοχεία για χρώμα";

## Χαρακτηριστικά

- **Πρόσβαση σε Σχήματα Πολλαπλών Πινάκων**: Ανάκτηση σχημάτων για πολλούς πίνακες βάσης δεδομένων με ένα αίτημα
- **Ασφαλής Εκτέλεση Ερωτημάτων**: Εκτέλεση ερωτημάτων PostgreSQL με υποστήριξη Row Level Security (RLS)
- **Δεδομένα σε Πραγματικό Χρόνο**: Πρόσβαση σε τρέχοντα δεδομένα πωλήσεων, αποθεμάτων και πελατών
- **Χρησιμότητα Ημερομηνίας/Ώρας**: Λήψη τρέχουσας ώρας UTC για ανάλυση ευαίσθητη στον χρόνο
- **Ευέλικτη Ανάπτυξη**: Υποστηρίζει λειτουργία HTTP server

## Υποστηριζόμενοι Πίνακες

Ο server παρέχει πρόσβαση στους παρακάτω πίνακες βάσης δεδομένων λιανικής:

- `retail.customers` - Πληροφορίες και προφίλ πελατών
- `retail.stores` - Τοποθεσίες και λεπτομέρειες καταστημάτων
- `retail.categories` - Κατηγορίες προϊόντων και ιεραρχίες
- `retail.product_types` - Ταξινομήσεις τύπων προϊόντων
- `retail.products` - Κατάλογος προϊόντων και προδιαγραφές
- `retail.orders` - Παραγγελίες πελατών και συναλλαγές
- `retail.order_items` - Μεμονωμένα αντικείμενα εντός παραγγελιών
- `retail.inventory` - Τρέχοντα επίπεδα αποθεμάτων και δεδομένα στοκ

## Διαθέσιμα Εργαλεία

### `get_multiple_table_schemas`

Ανάκτηση σχημάτων βάσης δεδομένων για πολλούς πίνακες με ένα αίτημα.

**Παράμετροι:**

- `table_names` (list[str]): Λίστα έγκυρων ονομάτων πινάκων από τους παραπάνω υποστηριζόμενους πίνακες

**Επιστρέφει:** Συγκεντρωμένες συμβολοσειρές σχημάτων για τους ζητούμενους πίνακες

### `execute_sales_query`

Εκτέλεση ερωτημάτων PostgreSQL στη βάση δεδομένων πωλήσεων με υποστήριξη Row Level Security.

**Παράμετροι:**

- `postgresql_query` (str): Ένα σωστά διαμορφωμένο ερώτημα PostgreSQL

**Επιστρέφει:** Αποτελέσματα ερωτήματος μορφοποιημένα ως συμβολοσειρά (περιορισμένα σε 20 γραμμές για ευανάγνωστοτητα)

**Καλές Πρακτικές:**

- Πάντα να ανακτάτε πρώτα τα σχήματα πινάκων
- Χρησιμοποιήστε ακριβή ονόματα στηλών από τα σχήματα
- Συνδέστε σχετικούς πίνακες για ολοκληρωμένη ανάλυση
- Συγκεντρώστε αποτελέσματα όταν είναι απαραίτητο
- Περιορίστε την έξοδο για ευανάγνωστοτητα

### `get_current_utc_date`

Λήψη της τρέχουσας ημερομηνίας και ώρας UTC σε μορφή ISO.

**Επιστρέφει:** Τρέχουσα ημερομηνία/ώρα UTC σε μορφή ISO (YYYY-MM-DDTHH:MM:SS.fffffZ)

### `semantic_search_products`

Εκτέλεση σημασιολογικής αναζήτησης για προϊόντα βάσει ερωτημάτων χρήστη.

**Επιστρέφει:** Λίστα προϊόντων που ταιριάζουν με τα κριτήρια αναζήτησης

**Παράμετροι:**

- `query` (str): Η συμβολοσειρά ερωτήματος αναζήτησης

**Επιστρέφει:** Λίστα προϊόντων που ταιριάζουν με τα κριτήρια αναζήτησης

## Χαρακτηριστικά Ασφάλειας

### Row Level Security (RLS)

Ο server εφαρμόζει Row Level Security για να διασφαλίσει ότι οι χρήστες έχουν πρόσβαση μόνο στα δεδομένα που είναι εξουσιοδοτημένοι να βλέπουν:

- **Λειτουργία HTTP**: Χρησιμοποιεί την κεφαλίδα `x-rls-user-id` για την ταυτοποίηση του αιτούντος χρήστη

- **Προεπιλεγμένη Εφεδρεία**: Χρησιμοποιεί UUID placeholder όταν δεν παρέχεται user ID

#### Μοναδικά RLS User IDs για Καταστήματα

Κάθε τοποθεσία καταστήματος Zava Retail έχει ένα μοναδικό RLS user ID που καθορίζει ποια δεδομένα μπορεί να έχει πρόσβαση ο χρήστης:

| Τοποθεσία Καταστήματος | RLS User ID | Περιγραφή |
|-----------------------|-------------|-------------|
| **Παγκόσμια Πρόσβαση** | `00000000-0000-0000-0000-000000000000` | Προεπιλεγμένη εφεδρεία - πρόσβαση σε όλα τα καταστήματα |
| **Seattle** | `f47ac10b-58cc-4372-a567-0e02b2c3d479` | Δεδομένα καταστήματος Zava Retail Seattle |
| **Bellevue** | `6ba7b810-9dad-11d1-80b4-00c04fd430c8` | Δεδομένα καταστήματος Zava Retail Bellevue |
| **Tacoma** | `a1b2c3d4-e5f6-7890-abcd-ef1234567890` | Δεδομένα καταστήματος Zava Retail Tacoma |
| **Spokane** | `d8e9f0a1-b2c3-4567-8901-234567890abc` | Δεδομένα καταστήματος Zava Retail Spokane |
| **Everett** | `3b9ac9fa-cd5e-4b92-a7f2-b8c1d0e9f2a3` | Δεδομένα καταστήματος Zava Retail Everett |
| **Redmond** | `e7f8a9b0-c1d2-3e4f-5678-90abcdef1234` | Δεδομένα καταστήματος Zava Retail Redmond |
| **Kirkland** | `9c8b7a65-4321-fed0-9876-543210fedcba` | Δεδομένα καταστήματος Zava Retail Kirkland |
| **Online** | `2f4e6d8c-1a3b-5c7e-9f0a-b2d4f6e8c0a2` | Δεδομένα καταστήματος Zava Retail Online |

#### Υλοποίηση RLS

Όταν ένας χρήστης συνδέεται με το συγκεκριμένο RLS User ID ενός καταστήματος, θα βλέπει μόνο:

- Πελάτες που συνδέονται με αυτό το κατάστημα
- Παραγγελίες που έγιναν σε αυτήν την τοποθεσία καταστήματος
- Δεδομένα αποθεμάτων για αυτό το συγκεκριμένο κατάστημα
- Μετρήσεις πωλήσεων και απόδοσης συγκεκριμένες για το κατάστημα

Αυτό διασφαλίζει την απομόνωση δεδομένων μεταξύ διαφορετικών τοποθεσιών καταστημάτων, ενώ διατηρεί ένα ενιαίο σχήμα βάσης δεδομένων.

## Αρχιτεκτονική

### Πλαίσιο Εφαρμογής

Ο server χρησιμοποιεί ένα διαχειριζόμενο πλαίσιο εφαρμογής με:

- **Πισίνα Συνδέσεων Βάσης Δεδομένων**: Αποτελεσματική διαχείριση συνδέσεων για λειτουργία HTTP
- **Διαχείριση Κύκλου Ζωής**: Σωστό καθαρισμό πόρων κατά το κλείσιμο
- **Ασφάλεια Τύπων**: Ισχυρά τυποποιημένο πλαίσιο με dataclass `AppContext`

### Πλαίσιο Αιτήματος

- **Εξαγωγή Κεφαλίδων**: Ασφαλής ανάλυση κεφαλίδων για την ταυτοποίηση χρηστών
- **Ενσωμάτωση RLS**: Αυτόματη επίλυση user ID από το πλαίσιο αιτήματος
- **Διαχείριση Σφαλμάτων**: Ολοκληρωμένη διαχείριση σφαλμάτων με φιλικά μηνύματα προς τον χρήστη

## Ενσωμάτωση Βάσης Δεδομένων

Ο server ενσωματώνεται με μια βάση δεδομένων PostgreSQL μέσω της κλάσης `PostgreSQLSchemaProvider`:

- **Πισίνα Συνδέσεων**: Χρησιμοποιεί ασύγχρονες πισίνες συνδέσεων για επεκτασιμότητα
- **Μεταδεδομένα Σχήματος**: Παρέχει λεπτομερείς πληροφορίες σχήματος πινάκων
- **Εκτέλεση Ερωτημάτων**: Ασφαλής εκτέλεση ερωτημάτων με υποστήριξη RLS
- **Διαχείριση Πόρων**: Αυτόματος καθαρισμός πόρων βάσης δεδομένων

## Διαχείριση Σφαλμάτων

Ο server εφαρμόζει ισχυρή διαχείριση σφαλμάτων:

- **Επικύρωση Πινάκων**: Διασφαλίζει ότι έχουν πρόσβαση μόνο έγκυρα ονόματα πινάκων
- **Επικύρωση Ερωτημάτων**: Επικυρώνει ερωτήματα PostgreSQL πριν την εκτέλεση
- **Διαχείριση Πόρων**: Σωστός καθαρισμός ακόμη και κατά τη διάρκεια σφαλμάτων
- **Φιλικά Μηνύματα**: Καθαρά μηνύματα σφαλμάτων για αντιμετώπιση προβλημάτων

## Σκέψεις Ασφάλειας

1. **Row Level Security**: Όλα τα ερωτήματα σέβονται τις πολιτικές RLS βάσει της ταυτότητας του χρήστη
2. **Απομόνωση Δεδομένων Καταστημάτων**: Το RLS User ID κάθε καταστήματος διασφαλίζει πρόσβαση μόνο στα δεδομένα του συγκεκριμένου καταστήματος
3. **Επικύρωση Εισόδου**: Τα ονόματα πινάκων και τα ερωτήματα επικυρώνονται πριν την εκτέλεση
4. **Περιορισμοί Πόρων**: Τα αποτελέσματα ερωτημάτων περιορίζονται για την αποφυγή υπερβολικής χρήσης πόρων
5. **Ασφάλεια Συνδέσεων**: Χρησιμοποιεί ασφαλείς πρακτικές σύνδεσης βάσης δεδομένων
6. **Επαλήθευση Ταυτότητας Χρήστη**: Πάντα να διασφαλίζετε ότι χρησιμοποιείται το σωστό RLS User ID για την προοριζόμενη τοποθεσία καταστήματος

### Σημαντικές Σημειώσεις Ασφάλειας

- **Ποτέ μην χρησιμοποιείτε RLS User IDs παραγωγής σε περιβάλλοντα ανάπτυξης**
- **Πάντα να επαληθε

---

**Αποποίηση ευθύνης**:  
Αυτό το έγγραφο έχει μεταφραστεί χρησιμοποιώντας την υπηρεσία αυτόματης μετάφρασης [Co-op Translator](https://github.com/Azure/co-op-translator). Παρόλο που καταβάλλουμε προσπάθειες για ακρίβεια, παρακαλούμε να έχετε υπόψη ότι οι αυτόματες μεταφράσεις ενδέχεται να περιέχουν λάθη ή ανακρίβειες. Το πρωτότυπο έγγραφο στη μητρική του γλώσσα θα πρέπει να θεωρείται η αυθεντική πηγή. Για κρίσιμες πληροφορίες, συνιστάται επαγγελματική ανθρώπινη μετάφραση. Δεν φέρουμε ευθύνη για τυχόν παρεξηγήσεις ή εσφαλμένες ερμηνείες που προκύπτουν από τη χρήση αυτής της μετάφρασης.